
\app\Http\Middleware\RedirectIfAuthenticated.php

ログイン済みユーザーがアクセスしてきたら
リダイレクトの処理を行う

・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・

class RedirectIfAuthenticated
{
    \config\auth.phpのAuthentication Guardsで設定した
　　変数と合わせる必要がある
    
    private const GUARD_USER = 'users';
    private const GUARD_OWNER = 'owners';
    private const GUARD_ADMIN = 'admin';


    public function handle(Request $request, Closure $next, ...$guards)
    {
        
        if(Auth::guard(self::GUARD_USER)->check() && $request->routeIs('user.*')){
            return redirect(RouteServiceProvider::HOME);
        }

        if(Auth::guard(self::GUARD_OWNER)->check() && $request->routeIs('owner.*')){
            return redirect(RouteServiceProvider::OWNER_HOME);
        }

        if(Auth::guard(self::GUARD_ADMIN)->check() && $request->routeIs('admin.*')){
            return redirect(RouteServiceProvider::ADMIN_HOME);
        }        

        return $next($request);
    }
}

◆コード解説◆
Auth::guard(self::GUARD_USER)->check()
⇒ユーザーとして認証しているか判定を行う

$request->routeIs('user.*'))
⇒ユーザー関連のURLだったら?という条件になる

